#include <stdio.h>
#include <time.h>
#include "MLP.h"
#include <stdlib.h>

#define HEIGHT 10
#define WIDTH  2

int pred;

//float Input1[10][4]={{0.0303, 0.783568624, 0.609147346, 0.996737836}, {0.0297, 0.92660031, 0.55824148, 0.969711882}, {0.03, 0.731330472, 0.358931965, 1.030248432}, {0.0299, 0.758697836, 0.477999493, 1.060520676}, {0.0301, 0.807200256, 0.67471177, 0.917818875}, {0.03, 0.853218884, 0.630717091, 0.942685927}, {0.03, 0.772375126, 0.589300646, 1.051877133}, {0.0301, 0.671628162, 0.540985684, 1.08214144}, {0.0299, 0.797249566, 0.716140884, 1.091872371}, {0.0303, 0.951474751, 0.77910807, 1.033494722}};
//float Input1[10][4]={{0.03, 0.893420967, 0.488561525, 0.70013915}, {0.03, 0.843687649, 0.386271729, 0.690103954}, {0.03, 0.838357915, 0.356226039, 0.740271752}, {0.03, 0.838357915, 0.408444935, 0.809396742}, {0.03, 0.907630114, 0.432766136, 0.806048948}, {0.03, 0.808163348, 0.480694291, 0.712400753}, {0.03, 0.793954331, 0.478546295, 0.690103954}, {0.03, 0.753101731, 0.502867496, 0.771490546}, {0.03, 0.738892584, 0.480694291, 0.671154948}, {0.03, 0.753101731, 0.4506486, 0.639936155}};
//float Input1[10][4]={{0.03, 0.447149092, 0.329480586, 0.584161594}, {0.03, 0.462736515, 0.305618041, 0.584161594}, {0.03, 0.462736515, 0.299463064, 0.547730124}, {0.03, 0.447149092, 0.310235686, 0.508786202}, {0.03, 0.398616855, 0.342570508, 0.471098506}, {0.03, 0.339690033, 0.409568756, 0.44597399}, {0.03, 0.311960961, 0.532724806, 0.459792474}, {0.03, 0.331024698, 0.682049398, 0.484917912}, {0.03, 0.393416381, 0.820635279, 0.506273935}, {0.031, 0.492206288, 0.691318601, 0.506273935}};
//float Input1[10][4]={{0.03, 2.485582039, 0.477639855, 0.783780979}, {0.03, 4.340657587, 0.377561926, 0.931459108}, {0.03, 5.456628006, 0.324492068, 1.065427509}, {0.038, 5.543584805, 0.304775953, 1.151928439}, {0.042, 4.56533305, 0.278998052, 0.566480793}, {0.03, 3.56533305, 0.462477039, 0.638212515}, {0.03, 2.811715259, 0.667169496, 0.652981722}, {0.03, 1.485582039, 0.758903423, 0.769012546}, {0.03, 0.587039796, 0.75283607, 0.996863383}, {0.03, 0.891413067, 0.852919566, 1.07702912}};
//float Input1[10][4]={{0.031, 0.83031701, 1.561902434, 0.441876448}, {0.0314, 0.845574376, 1.524616287, 0.484988413}, {0.031, 0.782739076, 1.450053769, 0.47036116}, {0.0312, 0.727080999, 1.344862645, 0.394147403},{0.0311, 0.75760232, 1.288933425, 0.364124795}, {0.0311, 0.744137613, 1.217030013, 0.353347652}, {0.0311, 0.703743492, 1.115837325, 0.327174589}, {0.031, 0.658861135, 1.030616874, 0.331792234}, {0.0312, 0.686686878, 0.985344608, 0.320245295}, {0.031, 0.691175114, 0.894800078, 0.396457356}};



int main()
{
 time_t t;
 srand((unsigned) time(&t));

 FILE *myfile;
 myfile=fopen("/home/pi/test.txt", "r");
 float Input2[2];


 for (int i=0; i<HEIGHT; i++){
  //float Input2[4]={(double)rand() / (double)RAND_MAX, (double)rand() / (double)RAND_MAX, (double)rand() / (double)RAND_MAX, (double)rand() / (double)RAND_MAX};
   
    for (int j = 0 ; j < WIDTH; j++)
    {
      fscanf(myfile,"%f",&Input2[j]);
      printf("%.10f ",Input2[j]);
    }
    printf("\n");
 
    clock_t begin = clock();

  
    //pred=eml_net_predict(&lib, Input1[i],4);
    pred=eml_net_predict(&lib, Input2,2);

    clock_t end = clock();
    double microseconds= (double)(end - begin) / CLOCKS_PER_SEC;
    printf ("%d \n", pred);

//    printf ("%lf \n", microseconds);
    
 }
   
   return 0;
}


